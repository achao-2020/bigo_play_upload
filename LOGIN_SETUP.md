# 登录功能配置说明

## 功能概述

项目已添加登录功能，用户需要输入账号密码才能访问主页面。账号密码通过环境变量配置。

## 环境变量配置

在部署后端（Render/Railway 等）时，需要添加以下环境变量：

### 必需的环境变量

1. **LOGIN_USERNAME** - 登录账号
   - 示例：`LOGIN_USERNAME=admin`

2. **LOGIN_PASSWORD** - 登录密码
   - 示例：`LOGIN_PASSWORD=your_secure_password_123`

### 本地开发配置

如果本地开发时没有设置环境变量，系统会使用默认值：
- 默认账号：`admin`
- 默认密码：`admin123`

**⚠️ 注意：生产环境请务必设置强密码，不要使用默认值！**

## 使用流程

1. **访问应用**
   - 打开应用首页（`index.html`）时，如果未登录会自动跳转到登录页（`login.html`）

2. **登录**
   - 在登录页输入账号和密码
   - 点击"登录"按钮
   - 登录成功后会自动跳转到主页面

3. **使用应用**
   - 登录后可以正常使用上传和提交功能
   - 登录状态会保存在浏览器的 localStorage 中
   - Token 有效期为 24 小时

4. **登出**
   - 点击右上角的"登出"按钮
   - 登出后会清除登录状态并跳转到登录页

## 安全说明

- Token 存储在浏览器 localStorage 中
- Token 会在 24 小时后自动过期
- 所有需要认证的 API 请求都会验证 token
- 如果 token 无效或过期，会自动跳转到登录页

## 部署检查清单

在部署到线上前，请确认：

- [ ] 在 Render/Railway 等平台设置了 `LOGIN_USERNAME` 环境变量
- [ ] 在 Render/Railway 等平台设置了 `LOGIN_PASSWORD` 环境变量（使用强密码）
- [ ] 测试登录功能是否正常工作
- [ ] 测试未登录时访问主页面是否会自动跳转到登录页
- [ ] 测试登出功能是否正常

## 技术实现

- **后端**：使用内存存储 token（简单实现，适合单实例部署）
- **前端**：使用 localStorage 存储 token
- **认证方式**：Bearer Token（通过 Authorization header 或 x-auth-token header 传递）

## 注意事项

1. **多实例部署**：如果后端部署了多个实例，建议使用 Redis 等外部存储来共享 token，而不是内存存储
2. **HTTPS**：生产环境请务必使用 HTTPS，保护密码和 token 传输安全
3. **密码强度**：请设置足够强的密码，避免被暴力破解
